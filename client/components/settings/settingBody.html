
<template name="setting">
  <div class="setting-content">
    {{#unless currentUser.isAdmin}}
      {{_ 'error-notAuthorized'}}
    {{else}}
      <div class="content-title">
        <i class="fa fa-cog"></i>
        <span>{{_ 'settings'}}</span>
      </div>
      <div class="content-body">
        <div class="side-menu">
          <ul>
            <li class="active">
              <a class="js-setting-menu" data-id="registration-setting">
                <i class="fa fa-sign-in"></i>
                {{_ 'registration'}}
              </a>
            </li>
            {{#unless isSandstorm}}
              <li>
                <a class="js-setting-menu" data-id="email-setting">
                  <i class="fa fa-envelope"></i>
                  {{_ 'email'}}
                </a>
              </li>
            {{/unless}}
            <li>
              <a class="js-setting-menu" data-id="account-setting">
                <i class="fa fa-users"></i>
                {{_ 'accounts'}}
              </a>
            </li>
            <li>
              <a class="js-setting-menu" data-id="tableVisibilityMode-setting">
                <i class="fa fa-eye"></i>
                {{_ 'tableVisibilityMode'}}
              </a>
            </li>
            <li>
              <a class="js-setting-menu" data-id="announcement-setting">
                <i class="fa fa-bullhorn"></i>
                {{_ 'admin-announcement'}}
              </a>
            </li>
            <li>
              <a class="js-setting-menu" data-id="accessibility-setting">
                <i class="fa fa-universal-access"></i>
                {{_ 'accessibility'}}
              </a>
            </li>
            <li>
              <a class="js-setting-menu" data-id="layout-setting">
                <i class="fa fa-object-group"></i>
                {{_ 'layout'}}
              </a>
            </li>
            <li>
              <a class="js-setting-menu" data-id="webhook-setting">
                <i class="fa fa-globe"></i>
                {{_ 'global-webhook'}}
              </a>
            </li>
          </ul>
        </div>
        <div class="main-body">
          {{#if loading.get}}
            {{> spinner}}
          {{else if generalSetting.get}}
            {{> general}}
          {{else if emailSetting.get}}
            {{#unless isSandstorm}}
              {{> email}}
            {{/unless}}
          {{else if accountSetting.get}}
            {{> accountSettings}}
          {{else if tableVisibilityModeSetting.get}}
            {{> tableVisibilityModeSettings}}
          {{else if announcementSetting.get}}
            {{> announcementSettings}}
          {{else if accessibilitySetting.get}}
            {{> accessibilitySettings}}
          {{else if layoutSetting.get}}
            {{> layoutSettings}}
          {{else if webhookSetting.get}}
            {{> webhookSettings}}
          {{/if}}
        </div>
      </div>
    {{/unless}}
  </div>
</template>

<template name="webhookSettings">
  <span>
    {{> outgoingWebhooksPopup}}
  </span>
</template>

<template name="general">
  <ul id="registration-setting" class="setting-detail">
    <li>
      <a class="flex js-toggle-forgot-password">
        <div class="materialCheckBox {{#if currentSetting.disableForgotPassword}}is-checked{{/if}}"></div>
        <span>{{_ 'disable-forgot-password'}}</span>
      </a>
    </li>
    <li>
      <a class="flex js-toggle-registration">
        <div class="materialCheckBox {{#if currentSetting.disableRegistration}}is-checked{{/if}}"></div>
        <span>{{_ 'disable-self-registration'}}</span>
      </a>
    </li>
    <li>
      <div class="invite-people {{#if currentSetting.disableRegistration}}{{else}}hide{{/if}}">
        <ul>
          <li>
            <div class="title">{{_ 'invite-people'}}</div>
            <textarea id="email-to-invite" class="wekan-form-control" rows="5" placeholder="{{_ 'email-addresses'}}"></textarea>
          </li>
          <li>
            <div class="title">{{_ 'to-boards'}}</div>
            <div class="bg-white">
              {{#each boards}}
                <a class="option flex js-toggle-board-choose" id="{{_id}}">
                  <div class="materialCheckBox" data-id="{{_id}}"></div>
                  <span>{{title}}</span>
                </a>
              {{/each}}
            </div>
          </li>
          <li>
            <button class="js-email-invite primary">{{_ 'invite'}}</button>
          </li>
        </ul>
      </div>
    </li>
  </ul>
</template>

<template name="email">
  <ul id="email-setting" class="setting-detail">
    <li>
      <button class="js-send-smtp-test-email primary">{{_ 'send-smtp-test'}}</button>
    </li>
  </ul>
</template>

<template name="tableVisibilityModeSettings">
  <ul id="tableVisibilityMode-setting" class="setting-detail">
    <li class="tableVisibilityMode-form">
      <div class="title">{{_ 'tableVisibilityMode-allowPrivateOnly'}}</div>
      <div class="form-group flex">
        <input class="wekan-form-control" id="accounts-allowPrivateOnly" type="radio" name="allowPrivateOnly" value="true" checked="{{#if allowPrivateOnly}}checked{{/if}}">
        <label>{{_ 'yes'}}</label>
        <input class="wekan-form-control" id="accounts-allowPrivateOnly" type="radio" name="allowPrivateOnly" value="false" checked="{{#unless allowPrivateOnly}}checked{{/unless}}">
        <label>{{_ 'no'}}</label>
      </div>
      <button class="js-tableVisibilityMode-save primary">{{_ 'save'}}</button>
    </li>
  </ul>
</template>

<template name="accountSettings">
  <ul id="account-setting" class="setting-detail">
    <li class="accounts-form">
      <div class="title">{{_ 'accounts-allowEmailChange'}}</div>
      <div class="form-group flex">
        <input class="wekan-form-control" id="accounts-allowEmailChange" type="radio" name="allowEmailChange" value="true" checked="{{#if allowEmailChange}}checked{{/if}}">
        <label>{{_ 'yes'}}</label>
        <input class="wekan-form-control" id="accounts-allowEmailChange" type="radio" name="allowEmailChange" value="false" checked="{{#unless allowEmailChange}}checked{{/unless}}">
        <label>{{_ 'no'}}</label>
      </div>
      <div class="title">{{_ 'accounts-allowUserNameChange'}}</div>
      <div class="form-group flex">
        <input class="wekan-form-control" id="accounts-allowUserNameChange" type="radio" name="allowUserNameChange" value="true" checked="{{#if allowUserNameChange}}checked{{/if}}">
        <label>{{_ 'yes'}}</label>
        <input class="wekan-form-control" id="accounts-allowUserNameChange" type="radio" name="allowUserNameChange" value="false" checked="{{#unless allowUserNameChange}}checked{{/unless}}">
        <label>{{_ 'no'}}</label>
      </div>
      <div class="title">{{_ 'accounts-allowUserDelete'}}</div>
      <div class="form-group flex">
        <input class="wekan-form-control" id="accounts-allowUserDelete" type="radio" name="allowUserDelete" value="true" checked="{{#if allowUserDelete}}checked{{/if}}">
        <label>{{_ 'yes'}}</label>
        <input class="wekan-form-control" id="accounts-allowUserDelete" type="radio" name="allowUserDelete" value="false" checked="{{#unless allowUserDelete}}checked{{/unless}}">
        <label>{{_ 'no'}}</label>
      </div>
      <button class="js-accounts-save primary">{{_ 'save'}}</button>
    </li>
  </ul>
</template>

<template name="announcementSettings">
  <ul id="announcement-setting" class="setting-detail">
    <li>
      <a class="flex js-toggle-activemessage">
        <div class="materialCheckBox {{#if currentAnnouncements.enabled}}is-checked{{/if}}"></div>
        <span>{{_ 'admin-announcement-active'}}</span>
      </a>
    </li>
    <li>
      <div class="admin-announcement {{#if currentAnnouncements.enabled}}{{else}}hide{{/if}}">
        <ul>
          <li>
            <div class="title">{{_ 'admin-announcement-title'}}</div>
            <textarea id="admin-announcement" class="wekan-form-control">{{currentAnnouncements.body}}</textarea>
          </li>
          <li>
            <button class="js-announcement-save primary">{{_ 'save'}}</button>
          </li>
        </ul>
      </div>
    </li>
  </ul>
</template>

<template name="accessibilitySettings">
  <ul id="accessibility-setting" class="setting-detail">
    <li>
      <a class="flex js-toggle-accessibility">
        <div class="materialCheckBox {{#if currentAccessibility.enabled}}is-checked{{/if}}"></div>
        <span>{{_ 'admin-accessibility-active'}}</span>
      </a>
    </li>
    <li>
      <div class="title">{{_ 'accessibility-title'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="accessibility-title" type="text" placeholder="" value="{{currentSetting.accessibilityTitle}}">
      </div>
    </li>
    <li>
      <div class="accessibility-content {{#if currentAccessibility.enabled}}{{else}}hide{{/if}}">
        <ul>
          <li>
            <div class="title">{{_ 'admin-accessibility-title'}}</div>
            <textarea id="admin-accessibility" class="wekan-form-control">{{currentAccessibility.accessibilityTitle}}</textarea>
          </li>
          <li>
            <div class="title">{{_ 'admin-accessibility-content'}}</div>
            <textarea id="admin-accessibility" class="wekan-form-control">{{currentAccessibility.accessibilityContent}}</textarea>
          </li>
          <li>
            <button class="js-accessibility-save primary">{{_ 'save'}}</button>
          </li>
        </ul>
      </div>
    </li>
  </ul>
</template>

<template name="layoutSettings">
  <ul id="layout-setting" class="setting-detail">
    <li>
      <button class="js-all-boards-hide-activities primary">{{_ 'hide-activities-of-all-boards'}}</button>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'oidc-button-text'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="oidcBtnTextvalue" type="text" placeholder="" value="{{currentSetting.oidcBtnText}}">
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'can-invite-if-same-mailDomainName'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="mailDomainNamevalue" type="text" placeholder="" value="{{currentSetting.mailDomainName}}">
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'custom-legal-notice-link-url'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="legalNoticevalue" type="text" placeholder="" value="{{currentSetting.legalNotice}}">
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'display-authentication-method'}}</div>
      <div class="form-group flex">
        <input class="wekan-form-control" id="display-authentication-method" type="radio" name="displayAuthenticationMethod" value="true" checked="{{#if currentSetting.displayAuthenticationMethod}}checked{{/if}}">
        <label>{{_ 'yes'}}</label>
        <input class="wekan-form-control" id="display-authentication-method" type="radio" name="displayAuthenticationMethod" value="false" checked="{{#unless currentSetting.displayAuthenticationMethod}}checked{{/unless}}">
        <label>{{_ 'no'}}</label>
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'default-authentication-method'}}</div>
      {{> selectAuthenticationMethod authenticationMethod=currentSetting.defaultAuthenticationMethod}}
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'wait-spinner'}}</div>
      {{> selectSpinnerName spinnerName=currentSetting.spinnerName}}
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'custom-product-name'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="product-name" type="text" placeholder="" value="{{currentSetting.productName}}">
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'hide-logo'}}</div>
      <div class="form-group flex">
        <input class="wekan-form-control" id="hide-logo" type="radio" name="hideLogo" value="true" checked="{{#if currentSetting.hideLogo}}checked{{/if}}">
        <label>{{_ 'yes'}}</label>
        <input class="wekan-form-control" id="hide-logo" type="radio" name="hideLogo" value="false" checked="{{#unless currentSetting.hideLogo}}checked{{/unless}}">
        <label>{{_ 'no'}}</label>
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'custom-login-logo-image-url'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="custom-login-logo-image-url" type="text" placeholder="" value="{{currentSetting.customLoginLogoImageUrl}}">
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'custom-login-logo-link-url'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="custom-login-logo-link-url" type="text" placeholder="" value="{{currentSetting.customLoginLogoLinkUrl}}">
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'custom-help-link-url'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="custom-help-link-url" type="text" placeholder="" value="{{currentSetting.customHelpLinkUrl}}">
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'text-below-custom-login-logo'}}</div>
      <div class="form-group">
        <textarea id="text-below-custom-login-logo" class="wekan-form-control">{{currentSetting.textBelowCustomLoginLogo}}</textarea>
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'custom-top-left-corner-logo-image-url'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="custom-top-left-corner-logo-image-url" type="text" placeholder="" value="{{currentSetting.customTopLeftCornerLogoImageUrl}}">
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'custom-top-left-corner-logo-link-url'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="custom-top-left-corner-logo-link-url" type="text" placeholder="" value="{{currentSetting.customTopLeftCornerLogoLinkUrl}}">
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'custom-top-left-corner-logo-height'}}</div>
      <div class="form-group">
        <input class="wekan-form-control" id="custom-top-left-corner-logo-height" type="text" placeholder="" value="{{currentSetting.customTopLeftCornerLogoHeight}}">
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'automatic-linked-url-schemes'}}</div>
      <div class="form-group">
        <textarea id="automatic-linked-url-schemes" class="wekan-form-control">{{currentSetting.automaticLinkedUrlSchemes}}</textarea>
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'hide-card-counter-list'}}</div>
      <div class="form-group flex">
        <input class="wekan-form-control" id="hide-card-counter-list" type="radio" name="hideCardCounterList" value="true" checked="{{#if currentSetting.hideCardCounterList}}checked{{/if}}">
        <label>{{_ 'yes'}}</label>
        <input class="wekan-form-control" id="hide-card-counter-list" type="radio" name="hideCardCounterList" value="false" checked="{{#unless currentSetting.hideCardCounterList}}checked{{/unless}}">
        <label>{{_ 'no'}}</label>
      </div>
    </li>
    <li class="layout-form">
      <div class="title">{{_ 'hide-board-member-list'}}</div>
      <div class="form-group flex">
        <input class="wekan-form-control" id="hide-board-member-list" type="radio" name="hideBoardMemberList" value="true" checked="{{#if currentSetting.hideBoardMemberList}}checked{{/if}}">
        <label>{{_ 'yes'}}</label>
        <input class="wekan-form-control" id="hide-board-member-list" type="radio" name="hideBoardMemberList" value="false" checked="{{#unless currentSetting.hideBoardMemberList}}checked{{/unless}}">
        <label>{{_ 'no'}}</label>
      </div>
    </li>
    <li>
      <button class="js-save-layout primary">{{_ 'save'}}</button>
    </li>
  </ul>
</template>

<template name="selectAuthenticationMethod">
  <select id="defaultAuthenticationMethod">
    {{#each authentications}}
      {{#if isSelected value}}
        <option value="{{value}}" selected>{{_ value}}</option>
      {{else}}
        <option value="{{value}}">{{_ value}}</option>
      {{/if}}
    {{/each}}
  </select>
</template>

<template name="selectSpinnerName">
  <select id="spinnerName">
    {{#each spinner in spinners}}
      {{#if isSelected spinner}}
        <option value="{{spinner}}" selected>{{_ spinner}}</option>
      {{else}}
        <option value="{{spinner}}">{{_ spinner}}</option>
      {{/if}}
    {{/each}}
  </select>
</template>
