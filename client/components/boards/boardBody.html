<template name="board">
  {{#if isBoardReady.get}}
    {{#if currentBoard}}
      {{#if onlyShowCurrentCard}}
        {{> cardDetails currentCard}}
      {{else}}
        {{> boardBody}}
      {{/if}}
    {{else}}
      {{!-- XXX We need a better error message in case the board has been archived --}}
      {{> message label="board-not-found"}}
      {{!-- {{goHome}} --}}
    {{/if}}
  {{else}}
    {{> spinner}}
  {{/if}}
</template>

<template name="boardBody">
  {{#if notDisplayThisBoard}}
    {{_ 'tableVisibilityMode-allowPrivateOnly'}}
  {{else}}
    <div class="board-wrapper {{currentBoard.colorClass}}">
      <div class="board-canvas js-swimlanes dragscroll {{#if Sidebar.isOpen}}is-sibling-sidebar-open{{/if}} {{#if MultiSelection.isActive}}is-multiselection-active{{/if}} {{#if draggingActive.get}}is-dragging-active{{/if}}">
        {{#if showOverlay.get}}
          <div class="board-overlay"></div>
        {{/if}}
        {{#if currentBoard.isTemplatesBoard}}
          {{#each currentBoard.swimlanes}}
            {{> swimlane this}}
          {{/each}}
        {{else if isViewSwimlanes}}
          {{#each currentBoard.swimlanes}}
            {{> swimlane this}}
          {{/each}}
        {{else if isViewLists}}
          {{> listsGroup currentBoard}}
        {{else if isViewCalendar}}
          {{> calendarView}}
        {{else}}
          {{> listsGroup currentBoard}}
        {{/if}}
      </div>
      {{> sidebar}}
    </div>
  {{/if}}
</template>

<template name="calendarView">
  {{#if isViewCalendar}}
    <div class="calendar-view swimlane">
      {{#if currentCard}}
        {{> cardDetails currentCard}}
      {{/if}}
      {{> fullcalendar calendarOptions}}
    </div>
  {{/if}}
</template>
